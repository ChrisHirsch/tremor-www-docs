



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="The Tremor Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Overview - Tremor Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="black" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tremor-query" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Tremor Documentation" aria-label="Tremor Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../img/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Tremor Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Overview
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/wayfair-tremor/tremor-www-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    wayfair-tremor/tremor-www-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Tremor Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../img/logo.png" width="48" height="48">
      
    </a>
    Tremor Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/wayfair-tremor/tremor-www-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    wayfair-tremor/tremor-www-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" title="Architecture Overview" class="md-nav__link">
      Architecture Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tremor Query
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tremor Query
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="./" title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principles" class="md-nav__link">
    Principles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safety" class="md-nav__link">
    Safety
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-friendly" class="md-nav__link">
    Developer friendly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stream-oriented-event-based" class="md-nav__link">
    Stream-oriented / event-based
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-documenting" class="md-nav__link">
    Self-documenting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensibility" class="md-nav__link">
    Extensibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performant" class="md-nav__link">
    Performant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#productive" class="md-nav__link">
    Productive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language" class="md-nav__link">
    Language
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tremor-script" class="md-nav__link">
    Tremor-Script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queries" class="md-nav__link">
    Queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stream-definitions" class="md-nav__link">
    Stream definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#window-definitions" class="md-nav__link">
    Window definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customer-operator-definitions" class="md-nav__link">
    Customer Operator definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-script-definitions" class="md-nav__link">
    Embedded script definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-queries" class="md-nav__link">
    Select queries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="walkthrough/" title="Walkthrough" class="md-nav__link">
      Walkthrough
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Aggregate Function Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Aggregate Function Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="functions/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="functions/stats/" title="stats" class="md-nav__link">
      stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="functions/win/" title="win" class="md-nav__link">
      win
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="recipes/" title="Recipes" class="md-nav__link">
      Recipes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Tremor Script
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tremor Script
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Function Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Function Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/array/" title="array" class="md-nav__link">
      array
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/chash/" title="chash" class="md-nav__link">
      chash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/datetime/" title="datetime" class="md-nav__link">
      datetime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/integer/" title="integer" class="md-nav__link">
      integer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/float/" title="float" class="md-nav__link">
      float
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/json/" title="json" class="md-nav__link">
      json
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/math/" title="math" class="md-nav__link">
      math
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/origin/" title="origin" class="md-nav__link">
      origin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/range/" title="range" class="md-nav__link">
      range
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/random/" title="random" class="md-nav__link">
      random
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/record/" title="record" class="md-nav__link">
      record
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/re/" title="re" class="md-nav__link">
      re
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/string/" title="string" class="md-nav__link">
      string
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/system/" title="system" class="md-nav__link">
      system
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/functions/type/" title="type" class="md-nav__link">
      type
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Extractor Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Extractor Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/base64/" title="Base64" class="md-nav__link">
      Base64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/cidr/" title="CIDR" class="md-nav__link">
      CIDR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/datetime/" title="Datetime" class="md-nav__link">
      Datetime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/dissect/" title="Dissect" class="md-nav__link">
      Dissect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/glob/" title="Glob" class="md-nav__link">
      Glob
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/grok/" title="Grok" class="md-nav__link">
      Grok
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/influx/" title="Influx" class="md-nav__link">
      Influx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/json/" title="JSON" class="md-nav__link">
      JSON
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/kv/" title="KV" class="md-nav__link">
      KV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/extractors/regex/" title="Regex" class="md-nav__link">
      Regex
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tremor-script/recipes/" title="Recipes" class="md-nav__link">
      Recipes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/cli/" title="Tremor Tool" class="md-nav__link">
      Tremor Tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operations/configuration-walkthrough/" title="Configuration Walkthrough" class="md-nav__link">
      Configuration Walkthrough
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Artefacts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Artefacts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/preprocessors/" title="Preprocessors" class="md-nav__link">
      Preprocessors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/postprocessors/" title="Postprocessors" class="md-nav__link">
      Postprocessors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/codecs/" title="Codecs" class="md-nav__link">
      Codecs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/onramps/" title="Onramps" class="md-nav__link">
      Onramps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/offramps/" title="Offramps" class="md-nav__link">
      Offramps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artefacts/operators/" title="Operators" class="md-nav__link">
      Operators
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../development/quick-start/" title="Quick Start Guide" class="md-nav__link">
      Quick Start Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/profiling/" title="Profiling" class="md-nav__link">
      Profiling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/debugging/" title="Debugging with LLDB" class="md-nav__link">
      Debugging with LLDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      Benchmarking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        Benchmarking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../development/benchmarking/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/benchmarks/LogstashBenchmark/" title="Logstash" class="md-nav__link">
      Logstash
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/issue-investigation/" title="Investigation" class="md-nav__link">
      Investigation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../history/" title="History" class="md-nav__link">
      History
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Governance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Governance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CodeOfConduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CII/" title="Core Infrastructure Initiative" class="md-nav__link">
      Core Infrastructure Initiative
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../policies/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principles" class="md-nav__link">
    Principles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safety" class="md-nav__link">
    Safety
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-friendly" class="md-nav__link">
    Developer friendly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stream-oriented-event-based" class="md-nav__link">
    Stream-oriented / event-based
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-documenting" class="md-nav__link">
    Self-documenting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensibility" class="md-nav__link">
    Extensibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performant" class="md-nav__link">
    Performant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#productive" class="md-nav__link">
    Productive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language" class="md-nav__link">
    Language
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tremor-script" class="md-nav__link">
    Tremor-Script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queries" class="md-nav__link">
    Queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stream-definitions" class="md-nav__link">
    Stream definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#window-definitions" class="md-nav__link">
    Window definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customer-operator-definitions" class="md-nav__link">
    Customer Operator definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-script-definitions" class="md-nav__link">
    Embedded script definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-queries" class="md-nav__link">
    Select queries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/wayfair-tremor/tremor-www-docs/edit/master/docs/tremor-query/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="tremor-query">Tremor-Query<a class="headerlink" href="#tremor-query" title="Permanent link">&para;</a></h1>
<p>The tremor query language, <code>tremor-query</code> or <strong>trickle</strong> is an interpreted statement-oriented language designed for continuous online structured queries with support filtering, extraction, transformation and streaming of structured data in a stream or event-based processing system.</p>
<p>At its core, <code>tremor-query</code> supports the definition of windows operators, stream definitions and operations on those streams such as <strong>select</strong>, <strong>operator</strong> and script__.</p>
<p>Structured queries in <strong>trickle</strong> consume unstructured data that are in and of themselves at least well-formed ( eg: such as JSON ) and produce synthetic events that are also well-formed and in and of themselves unstructured.</p>
<p>The language does not impose schema based constraints on data flowing through the system, although this may produce runtime errors for badly written queries.</p>
<p>The query language interpreter constructs a directed-acyclic-graph or <strong>DAG</strong> by analysing the dependencies of operators in a user defined query. The input and output streams are then calculated. The DAG model is the same as the pipeline model in previous versions of tremor, but with a rich query language replacing the depricated** tremor yaml format for pipelines.</p>
<h2 id="principles">Principles<a class="headerlink" href="#principles" title="Permanent link">&para;</a></h2>
<h3 id="safety">Safety<a class="headerlink" href="#safety" title="Permanent link">&para;</a></h3>
<p>The language is explicitly not Turing-complete:</p>
<ul>
<li>there are no unstructured <code>goto</code> grammar forms</li>
<li>there are no unbounded <code>for</code>, <code>while</code> or <code>do..while</code> looping constructs</li>
<li>the language is built on top of rust, inheriting its robustness and safety features, without the development overheads</li>
</ul>
<h3 id="developer-friendly">Developer friendly<a class="headerlink" href="#developer-friendly" title="Permanent link">&para;</a></h3>
<p>The language adopts a SQL-like syntax for key statement forms and has a path-like syntax for indexing into records and arrays. The statement-oriented query language prefers nested data-structures to tables and columns from traditional ANSI-ISO SQL as most of the data processed through tremor is structured and JSON-like.</p>
<p>The expression language in <strong>trickle</strong> is based on <code>tremor-script</code>.</p>
<h3 id="stream-oriented-event-based">Stream-oriented / event-based<a class="headerlink" href="#stream-oriented-event-based" title="Permanent link">&para;</a></h3>
<p>Tremor-query is designed to process unstructured ( but well-formed ) data events. Event data can be JSON, MsgPack or any other form supported by the tremor event processing system.</p>
<h3 id="self-documenting">Self-documenting<a class="headerlink" href="#self-documenting" title="Permanent link">&para;</a></h3>
<p>The SQL-like syntax enables a natural and familiar style whilst allowing the resulting statements to be compiled into a formal DAG for compile-time checks and to ensure correctness.</p>
<p>Leveraging the tremor-query expression syntax allows rich filtering, transformation, patching, merging and object and array comprehensions to be programmed.</p>
<p>The addition of aggregate functions, and windowing allows batches or a slice in time of events to be summarised or processed together to derive useful synthetic events.</p>
<p>Like its sibling langauge <code>tremor-script</code>, <code>tremor-query</code> supports the same data-types is entirely event-driven. For existing tremor users it is relatively easy to learn, yet powerful and flexible.</p>
<h3 id="extensibility">Extensibility<a class="headerlink" href="#extensibility" title="Permanent link">&para;</a></h3>
<p>The SQL-based nature of <code>tremor-query</code> means that complex branching, combining or powerful constructs such as in-memory tables can be added following a familiar SQL-like syntax.</p>
<p>The expression-based expression language derived from <code>tremor-script</code> allows computational forms to be extended.</p>
<p>The language core is designed for reuse - currently the expression language is reused in the query langauge, as are the library of functions available to both. The addition of aggregate functions is currently exclusive to tremor-query as these are only relevant when processing multiple in-flight ( or cached ) events at the same time.</p>
<p>In the future, <code>tremor-query</code> may be retargeted as a JIT-compiled language and other domain specific languages may be integrated as the tremor runtime evolves to meet new uses, demands, and stake-holders.</p>
<h3 id="performant">Performant<a class="headerlink" href="#performant" title="Permanent link">&para;</a></h3>
<p>Data ingested into tremor-query is vectorized via SIMD-parallel instructions on x86-64 or other Intel processor architectures supporting ssev3/avx extensions. Processing streams of such event-data incurs some allocation overhead at this time, but these event-bound allocations are being written out of the interpreter.</p>
<p>The current meaning of <code>performant</code> as documented here means that `tremor-query is more efficient at processing metrics-like data than the system it replaces ( telegraf / kapacitor / influx ) which do not support rich proactive and reactive back-pressure mechanisms or efficient asynchronous event-based data distribution between system components.</p>
<h3 id="productive">Productive<a class="headerlink" href="#productive" title="Permanent link">&para;</a></h3>
<p>The <code>tremor-query</code> parsing tool-chain has been designed with ease-of-debugging and ease-of-development in mind. It has builtin support for syntax-highlighting on the console with errors annotating highlighted sections of badly written scripts to simplify fixing such scripts.</p>
<p>The tool-chain inherits most of its core capabilities from the <code>tremor-script</code> and pipeline components of the tremor runtime. These components are already in large-scale production use and battle-hardened; this, in turn, minimises any associated risks with introducing a query language, whilst offering a migration path away from the far less expressive and far less easy-to-use yaml-based pipeline configuration which is more error-prone and verbose.</p>
<h2 id="language">Language<a class="headerlink" href="#language" title="Permanent link">&para;</a></h2>
<p>This section details the major components of the <code>tremor-query</code> language.</p>
<h3 id="tremor-script">Tremor-Script<a class="headerlink" href="#tremor-script" title="Permanent link">&para;</a></h3>
<p>Comments, Literals, Paths and Expression forms supported in <strong>trickle</strong> are the
same as in <code>tremor-script</code>.</p>
<h3 id="queries">Queries<a class="headerlink" href="#queries" title="Permanent link">&para;</a></h3>
<p>Queries are one or many statements separated by <code>;</code></p>
<p>Queries are compiled into a DAG of operator nodes and validated at compile time. At runtime, the resulting executable tremor pipeline is evaluated/interpreted.</p>
<p>Query grammar:</p>
<blockquote>
<p><img alt="query grammar" src="grammar/diagram/Query.png" /></p>
</blockquote>
<h3 id="statements">Statements<a class="headerlink" href="#statements" title="Permanent link">&para;</a></h3>
<p>Statements can be one of:</p>
<ul>
<li>Stream definitions</li>
<li>Window definitions</li>
<li>Custom Operator definitions</li>
<li>Embedded <code>tremor-script</code> definitions</li>
<li>Or builtin operations, like the <code>select</code> statement</li>
</ul>
<h4 id="stream-definitions">Stream definitions<a class="headerlink" href="#stream-definitions" title="Permanent link">&para;</a></h4>
<p>Stream definitions in <code>tremor-query</code> allow private intermediate streams to be named so that they can be used as the source or sinks in other continuous queries.</p>
<p>Stream definition grammar:</p>
<blockquote>
<p><img alt="create stream grammar" src="grammar/diagram/CreateStreamDefn.png" /></p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="kd">create</span><span class="w"> </span><span class="kd">stream</span><span class="w"> </span><span class="nx">passthrough</span><span class="err">;</span><span class="w"></span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">passthrough</span><span class="err">;</span><span class="w"> </span><span class="c1"># select default public &#39;in&#39; stream into passthrough</span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">passthrough</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="err">;</span><span class="w"> </span><span class="c1"># select passthrough into default public &#39;out&#39; stream</span>
</code></pre></div>


<h4 id="window-definitions">Window definitions<a class="headerlink" href="#window-definitions" title="Permanent link">&para;</a></h4>
<p>Window definitions in <code>tremor-query</code> can be either tumbling or sliding.</p>
<p>A tumbling window is a window configued with a fixed non-overlapping period of time. The aggregates events once opened, and continues aggregating until it closes. The window can emit synthetic events upon closing. The window reopens for its next cycle when it closes.</p>
<p>Window definition grammar:</p>
<blockquote>
<p><img alt="window definition grammar" src="grammar/diagram/DefineWindowDefn.png" />
<img alt="with params grammar" src="grammar/diagram/WithParams.png" />
<img alt="with partial paraqms grammar" src="grammar/diagram/WithPartialParams.png" />
<img alt="embedded script grammar" src="grammar/diagram/EmbeddedScript.png" /></p>
</blockquote>
<p>For example a 15 second tumbling window can be defined as follows</p>
<div class="codehilite"><pre><span></span><code><span class="kd">define</span><span class="w"> </span><span class="kd">tumbling</span><span class="w"> </span><span class="kd">window</span><span class="w"> </span><span class="nx">fifteen_secs</span><span class="w"></span>
<span class="kd">with</span><span class="w"></span>
<span class="w">    </span><span class="nx">interval</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="nx">datetime</span><span class="err">::</span><span class="nx">with_seconds</span><span class="err">(</span><span class="mi">15</span><span class="err">),</span><span class="w"></span>
<span class="kd">end</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<h4 id="customer-operator-definitions">Customer Operator definitions<a class="headerlink" href="#customer-operator-definitions" title="Permanent link">&para;</a></h4>
<p>Custom operators allow legacy operators written before the query language was designed to be used with the query language. As the query langauge and legacy yaml format share the same DAG model and pipeline formats, they are interoperable at runtime and are backwards compatible:</p>
<p>Operator definition grammar:</p>
<blockquote>
<p><img alt="operator definition grammar" src="grammar/diagram/DefineOperatorDefn.png" />
<img alt="with params grammar" src="grammar/diagram/WithParams.png" /></p>
</blockquote>
<p>Creating an operator:</p>
<blockquote>
<p><img alt="create operator grammar" src="grammar/diagram/CreateOperatorDefn.png" />
<img alt="with params grammar" src="grammar/diagram/WithParams.png" /></p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="c1"># create a bucketing operator</span>
<span class="kd">define</span><span class="w"> </span><span class="nx">grouper</span><span class="err">::</span><span class="nx">bucket</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>

<span class="kd">create</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>

<span class="c1"># ...</span>

<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">categorize</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">kfc</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<h4 id="embedded-script-definitions">Embedded script definitions<a class="headerlink" href="#embedded-script-definitions" title="Permanent link">&para;</a></h4>
<p>The tremor-script language can be embedded in the query language natively and this mirrors legacy usage where it was embedded within yaml-based pipeline configuration. However, the tooling that ships with <code>tremor-query</code> understands both the query language and scripting language dialects with better syntax highlighting and error checking built in for ease of operator productivity over the legacy yaml syntax.</p>
<p>Script definition grammar:</p>
<blockquote>
<p><img alt="script definition grammar" src="grammar/diagram/DefineScriptDefn.png" />
<img alt="with partial params grammar" src="grammar/diagram/WithPartialParams.png" />
<img alt="embeded script grammar" src="grammar/diagram/EmbeddedScript.png" /></p>
</blockquote>
<p>Script an operator:</p>
<blockquote>
<p><img alt="create script grammar" src="grammar/diagram/CreateScriptDefn.png" />
<img alt="with params grammar" src="grammar/diagram/WithParams.png" /></p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="kd">define</span><span class="w"> </span><span class="nx">grouper</span><span class="err">::</span><span class="nx">bucket</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>

<span class="kd">define</span><span class="w"> </span><span class="kd">script</span><span class="w"> </span><span class="nx">categorize</span><span class="w"></span>
<span class="kd">script</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="err">$</span><span class="nx">rate</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="mi">1</span><span class="err">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="err">$</span><span class="nx">class</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="kc">event</span><span class="err">.`</span><span class="kd">group</span><span class="err">`;</span><span class="w"></span>
<span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="s">&quot;event&quot;</span><span class="err">:</span><span class="w"> </span><span class="kc">event</span><span class="err">,</span><span class="w"> </span><span class="s">&quot;rate&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">$</span><span class="nx">rate</span><span class="err">,</span><span class="w"> </span><span class="s">&quot;class&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">$</span><span class="nx">class</span><span class="w"> </span><span class="err">};</span><span class="w"></span>
<span class="kd">end</span><span class="err">;</span><span class="w"></span>


<span class="kd">create</span><span class="w"> </span><span class="kd">script</span><span class="w"> </span><span class="nx">categorize</span><span class="err">;</span><span class="w"></span>
<span class="c1"># Stream ingested data into categorize script</span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">categorize</span><span class="err">;</span><span class="w"></span>

<span class="kd">create</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>
<span class="c1"># Stream scripted events into kfc bucket operator</span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">categorize</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">kfc</span><span class="err">;</span><span class="w"></span>

<span class="c1"># Stream bucketed events into out stream</span>
<span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">kfc</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<h4 id="select-queries">Select queries<a class="headerlink" href="#select-queries" title="Permanent link">&para;</a></h4>
<p>The select query is a builtin operation that is the workhorse of the tremor-query` language.</p>
<p>The select operation is of the general form:</p>
<blockquote>
<p><img alt="select grammar" src="grammar/diagram/SelectStmt.png" />
<img alt="from grammar" src="grammar/diagram/FromClause.png" />
<img alt="where grammar" src="grammar/diagram/WhereClause.png" />
<img alt="group by grammar" src="grammar/diagram/GroupByClause.png" />
<img alt="group by dimensions grammar" src="grammar/diagram/GroupByDimension.png" />
<img alt="set group grammar" src="grammar/diagram/SetBasedGroup.png" />
<img alt="each group grammar" src="grammar/diagram/EachBasedGroup.png" />
<img alt="into grammar" src="grammar/diagram/IntoClause.png" />
<img alt="having grammar" src="grammar/diagram/HavingClause.png" /></p>
</blockquote>
<p>A example select operation configured to pass through data from a pipelines default <code>in</code> stream to a pipelines default <code>out</code> stream:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<p>Select operations can filter ingested data with the specification of a where` clause. The clause forms a predicate check on the inbound events before any further processing takes place.</p>
<div class="codehilite"><pre><span></span><code><span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="w"> </span><span class="kd">where</span><span class="w"> </span><span class="kc">event</span><span class="err">.</span><span class="nx">is_interesting</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<p>Select operations can filter data being forwarded to other operators with the specification of a <code>where</code> clause. The clause forms a predicate check on outbound synthetic events after any other processing has taken place.</p>
<div class="codehilite"><pre><span></span><code><span class="kd">select</span><span class="w"> </span><span class="kc">event</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="w"> </span><span class="kd">having</span><span class="w"> </span><span class="kc">event</span><span class="err">.</span><span class="nx">is_interesting</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<p>Select operations can be windowed by <strong>applying</strong> a window to the inbound data stream.</p>
<div class="codehilite"><pre><span></span><code><span class="kd">define</span><span class="w"> </span><span class="kd">tumbling</span><span class="w"> </span><span class="kd">window</span><span class="w"> </span><span class="nx">fifteen_secs</span><span class="w"></span>
<span class="kd">with</span><span class="w"></span>
<span class="w">    </span><span class="nx">interval</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="nx">datetime</span><span class="err">::</span><span class="nx">with_seconds</span><span class="err">(</span><span class="mi">15</span><span class="err">),</span><span class="w"></span>
<span class="kd">end</span><span class="err">;</span><span class="w"></span>

<span class="kd">select</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s">&quot;count&quot;</span><span class="err">:</span><span class="w"> </span><span class="nx">stats</span><span class="err">::</span><span class="nx">count</span><span class="err">(</span><span class="kc">event</span><span class="err">)</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="err">[</span><span class="nx">fifteen_secs</span><span class="err">]</span><span class="w"> </span><span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="w"> </span><span class="kd">having</span><span class="w"> </span><span class="kc">event</span><span class="err">.</span><span class="nx">count</span><span class="w"> </span><span class="err">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<p>In the above operation, we emit a synthetic count every fifteen seconds if ast least one event has been witnessed during a 15 second window of time.</p>
<p>Select operations can be grouped through defining a <code>group by</code> clause</p>
<div class="codehilite"><pre><span></span><code><span class="kd">define</span><span class="w"> </span><span class="kd">tumbling</span><span class="w"> </span><span class="kd">window</span><span class="w"> </span><span class="nx">fifteen_secs</span><span class="w"></span>
<span class="kd">with</span><span class="w"></span>
<span class="w">    </span><span class="nx">interval</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="nx">datetime</span><span class="err">::</span><span class="nx">with_seconds</span><span class="err">(</span><span class="mi">15</span><span class="err">),</span><span class="w"></span>
<span class="kd">end</span><span class="err">;</span><span class="w"></span>

<span class="kd">select</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s">&quot;count&quot;</span><span class="err">:</span><span class="w"> </span><span class="nx">stats</span><span class="err">::</span><span class="nx">count</span><span class="err">(</span><span class="kc">event</span><span class="err">)</span><span class="w"> </span><span class="err">}</span><span class="w"></span>
<span class="kd">from</span><span class="w"> </span><span class="nx">in</span><span class="err">[</span><span class="nx">fifteen_secs</span><span class="err">]</span><span class="w"></span>
<span class="kd">group</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="kd">set</span><span class="err">(</span><span class="kc">event</span><span class="err">.</span><span class="nx">partition</span><span class="err">)</span><span class="w"></span>
<span class="kd">into</span><span class="w"> </span><span class="nx">out</span><span class="w"></span>
<span class="kd">having</span><span class="w"> </span><span class="kc">event</span><span class="err">.</span><span class="nx">count</span><span class="w"> </span><span class="err">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="err">;</span><span class="w"></span>
</code></pre></div>


<p>In the above operation, we partition the ingested events into groups defined by a required event.partition data field on the inbound event. Each of these groups maintains an independent fifteen second tumbling window, and each window upon closing gates outbound synthetic events by a count for that group.</p>
<p>The current implementation of <code>select</code> allows set-based and each-based grouping. These can be composed concatenatively. However <code>cube</code> and <code>rollup</code> based grouping dimensions are not currently supported.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../overview/" title="Architecture Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Architecture Overview
              </span>
            </div>
          </a>
        
        
          <a href="walkthrough/" title="Walkthrough" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Walkthrough
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>